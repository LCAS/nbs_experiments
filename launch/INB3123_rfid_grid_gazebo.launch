<?xml version="1.0" encoding="UTF-8"?>
<!--
  MFC:
    This file contains the configuration for creating a tag grid with visualization
    and some ground truth.
-->

<launch>

<!--
    <env name="ROSCONSOLE_CONFIG_FILE"
    value="$(find mcdm_experiments)/config/custom_rosconsole.conf"/>
-->
    <arg name="robot"           default="scitos"/>

    <arg name="map_folder" default="$(find mcdm_experiments)/maps/inb3123/map_sim"/>

    <!--
      Get regions from tiago map config and put them in rosparam server.
      This is automatically done inside tiago, but if we don't use PAL nav stack
      it will be missing
    -->
    <rosparam command="load" file="$(arg map_folder)/mmap.yaml" ns="mmap"/>

    <!-- GAZEBO-ROS bridge for Tiago RFID reader -->
    <node pkg="gazebo_rfid_node" type="wirelessNodeMonitor" name="rfid_node_sim" >
         <param name="ros_rfid_topic_name" value="/lastTag"/>
         <param name="ros_rfid_frame_id" value="lastTag"/>
         <param name="gazebo_wireless_node_topic_name" value="/gazebo/INB3123/scitos/base_footprint/tiago_rfid_reader_sensor/transceiver" if="$(eval robot == 'scitos')"/>
         <param name="gazebo_wireless_node_topic_name" value="/gazebo/INB3123/tiago/torso_lift_link/tiago_rfid_reader_sensor/transceiver" if="$(eval robot == 'tiago')"/>
    </node>

    <arg name="detectRadius"         default="0.75"/> <!-- detectRadius == b -->
    <arg name="cone_range"           default="1.5"/> <!-- cone_range == a -->
    <arg name="weight_inc"           default="0.1"/>
    <arg name="weight_dec"           default="0.002"/>

    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000001"/>
        <arg name="object"               value="remote"/>
        <arg name="tag_num"              value="1"/>
        <arg name="worldTagPose"         value="-3.45 -17.25 0.75 0.0 0.0 0.44"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="true"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>

    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000002"/>
        <arg name="object"               value="keys"/>
        <arg name="tag_num"              value="2"/>
        <arg name="worldTagPose"         value="3.22 -11.43 0.75 0.0 0.0 0.99 0.01"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>

    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000003"/>
        <arg name="object"               value="pillbox"/>
        <arg name="tag_num"              value="3"/>
        <arg name="worldTagPose"         value="-7.2 -8.4 0.75 0.0 0.0 0.41"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>
<!-- 
    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000004"/>
        <arg name="object"               value="wallet"/>
        <arg name="tag_num"              value="4"/>
        <arg name="worldTagPose"         value="3.4 -1.89 0.75 0.0 0.0 1.0 0.0"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>

    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000005"/>
        <arg name="object"               value="glasses"/>
        <arg name="tag_num"              value="5"/>
        <arg name="worldTagPose"         value="-11.5 1.76 0.75 0.0 0.0 0.41"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>

    <include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000006"/>
        <arg name="object"               value="umbrella"/>
        <arg name="tag_num"              value="6"/>
        <arg name="worldTagPose"         value="-3.41 12.49 0.75 0.0 0.0 -0.7 0.7"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include>

    <!--<include file="$(find rfid_grid_map)/launch/grid_debug.launch">
        <arg name="tagID"                value="390100010000000000000007"/>
        <arg name="object"               value="mug"/>
        <arg name="tag_num"              value="7"/>
        <arg name="worldTagPose"         value="-15.01 10.16 0.750 0.0 0.0 0.41"/>
        <arg name="is_sim"               value="true"/>
        <arg name="world_tf"             value="loc_map"/>
        <arg name="with_visualizer"      value="false"/>
        <arg name="detectRadius"    value="$(arg detectRadius)"/>
        <arg name="cone_range"      value="$(arg cone_range)"/>
        <arg name="weight_inc"      value="$(arg weight_inc)"/>
        <arg name="weight_dec"      value="$(arg weight_dec)"/>
    </include> -->

</launch>
